<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">
    
    
<!--    Bootstrap link-->
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
</head>

<body>
   <div class="container" style="margin-top: 100px;">
   <form method="post" onsubmit="return results();" id="form">
   
   <legend class="title">HEAT TEMPLATE GENERATOR</legend>
  <div class="form-group row">
    <label for="version" class="col-sm-2 col-form-label"  >heat_template_version:</label>
    <div class="col-sm-10" >
    
    <select class="form-control" id="version" style="width: 200px;">
    
     <option></option>
      <option>2013-05-23</option>
      <option>2014-10-16</option>
      <option>2015-04-30</option>
      <option>2015-10-15</option>
      <option>2016-04-08</option>
        <option>2016-10-14</option>
        <option>2017-02-24</option>
        <option>2017-09-01</option>
        <option>2018-03-02</option>
        <option>2018-08-31</option>
    </select>
    
<!--      <input type="text" class="form-control" id="version" placeholder="Version" style="width: 200px;">-->
    </div>
  </div> 
  
  <div class="form-group row">
    <label for="description" class="col-sm-2 col-form-label"  >description:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="description" placeholder="Description" style="width: 200px;">
    </div>
  </div>
  
  <div class="form-group row">
    <label for="resources" class="col-sm-2 col-form-label" id="resources">resources:</label>
<!--
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="resources" placeholder="Resources" style="width: 200px;">
    </div>
-->
  </div>

  <div class="form-group row">
    <label for="instance_name:" class="col-sm-2 col-form-label"  >instance_name:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="instance_name" placeholder="Instance_name" style="width: 200px;">
    </div>
  </div>

  <div class="form-group row">
    <label for="type" class="col-sm-2 col-form-label"  >type:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="type" placeholder="Type" style="width: 200px;">
    </div>
  </div>

  <div class="form-group row">
    <label for="properties" class="col-sm-2 col-form-label" id="properties" >properties:</label>
<!--
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="properties" placeholder="Properties" style="width: 200px;">
    </div>
-->
  </div>

  <div class="form-group row">
    <label for="key_name" class="col-sm-2 col-form-label"  >key_name:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="key_name" placeholder="Key_name" style="width: 200px;">
    </div>
  </div>

  <div class="form-group row">
    <label for="image" class="col-sm-2 col-form-label"  >image:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="image" placeholder="Image" style="width: 200px;">
    </div>
  </div>

  <div class="form-group row">
    <label for="flavor" class="col-sm-2 col-form-label"  >flavor:</label>
    <div class="col-sm-10" >
      <input type="text" class="form-control" id="flavor" placeholder="Flavor" style="width: 200px;">
    </div>
  </div>


  <button type="submit" value="submit" class="btn btn-primary">Give me the YAML file!</button>

   
    </form>
    
    <button class="btn btn-primary" name="Download" onclick="saveFormAsTextFile()">Download the yaml file</button>
</div><!--   container end-->
   
  
    <script>
        
 
    function results() {
      
//        var form = document.getElementById("form");
//        for (var i = 0; i < form.elements.length; i++) {
//            document.write(form.elements[i].value);
//    }
 
        var version =  document.getElementById('version').value;
        var description  = document.getElementById('description').value;
        var resources  = document.getElementById('resources').value;
        var instance_name  = document.getElementById('instance_name').value;
        var type  = document.getElementById('type').value;  
        var properties  = document.getElementById('properties').value;
        var key_name  = document.getElementById('key_name').value;
        var image  = document.getElementById('image').value;
        var flavor  = document.getElementById('flavor').value;
        
    
        document.write('heat_template_version: ' + version + '<br>' + 
                       'description: ' + description + '<br>' +
                       'resources: ' + '<br>' +
                       '&nbsp;&nbsp;' + instance_name + ': ' + '<br>' +
                       '&nbsp;&nbsp;&nbsp;&nbsp;' + 'type: ' + type + '<br>' +
                       '&nbsp;&nbsp;&nbsp;&nbsp;' + 'properties: '  + '<br>' +
                       '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'key_name: ' + key_name + '<br>'+
                       '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'image: ' + image + '<br>' +
                       '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + 'flavor: ' + flavor + '<br>'
                       
                       
                      );
        
    
}
        
    } // end of function results
        
        function saveFormAsTextFile() {
       
            


            
                    
        var formContents = "#This is the most basic heat template you can think of that contains only a single resource\n\nheat_template_version: ";
  
                var version = document.getElementById("version");
                formContents += version.value + "\n" + "description: ";

                var description = document.getElementById("description");
                formContents += description.value + "\n" + "resources: ";

                formContents +=  "\n"; 
               
                

                var instance_name = document.getElementById("instance_name");
                formContents += "  " + instance_name.value+ ": " + "\n" +
                "    type: ";

                var type = document.getElementById("type");
                formContents += type.value + "\n" +
                "    properties: ";
            
                formContents += "\n" +
                "      key_name: ";

                var key_name = document.getElementById("key_name");
                formContents += key_name.value + "\n" +
                "      image: ";

                var image = document.getElementById("image");
                formContents += image.value + "\n" + 
                "      flavor: ";

                var flavor = document.getElementById("flavor");
                formContents += flavor.value + "\n";

       
            var file_ext = ".yaml";
            var textToSaveAsBlob = new Blob([formContents], { type: "text/plain" });
            var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);
            var file_name = 'heat';
            var fileNameToSaveAs = file_name + file_ext;
           // var fileNameToSaveAs = file_name.substring(0, (file_name.length - 1)) + file_ext;
            var downloadLink = document.createElement("a");

            downloadLink.download = fileNameToSaveAs;
            downloadLink.innerHTML = "Download File";
            downloadLink.href = textToSaveAsURL;
//            downloadLink.onclick = destroyClickedElement;
            downloadLink.style.display = "none";
            document.body.appendChild(downloadLink);
            downloadLink.click();

        
        }
        
        

  
        </script>
<!--          <script src="script.js"></script>-->
    
</body>
</html>
